C51 COMPILER V9.54   MAIN                                                                  01/14/2026 22:32:46 PAGE 1   


C51 COMPILER V9.54, COMPILATION OF MODULE MAIN
OBJECT MODULE PLACED IN .\Objects\main.obj
COMPILER INVOKED BY: C:\Keil_v5\C51\BIN\C51.EXE main.c OPTIMIZE(8,SPEED) BROWSE DEBUG OBJECTEXTEND PRINT(.\Listings\main
                    -.lst) TABS(2) OBJECT(.\Objects\main.obj)

line level    source

   1          #include <REGX52.H>
   2          #include "LCD1602.h"
   3          #include "DS18B20.h"
   4          #include "Delay.h"
   5          #include "Nixie.h"
   6          #include "Timer0.h"
   7          #include "OneWire.h"
   8          float T;
   9          int s=22,s1=0,i,z=0,x=0,y=0,i;
  10          unsigned int cnt1=0;
  11          unsigned int T0Count,a;
  12          
  13          void main()
  14          {
  15   1        DS18B20_ConvertT();//DS18B20进行初始化温度转换
  16   1        Delay(1000);      
  17   1        Timer0Init();
  18   1        LCD_Init();//LCD初始
  19   1        LCD_ShowString(1,1,"NOW T:");
  20   1        while(1)
  21   1        {
  22   2          DS18B20_ConvertT(); 
  23   2          T=DS18B20_ReadT();  //温度读取T
  24   2          if(T<0)       
  25   2          {
  26   3            LCD_ShowChar(1,8,'-');  
  27   3            T=-T;                 //正负号与温度分开显示
  28   3          }
  29   2          else        
  30   2          {
  31   3            LCD_ShowChar(1,8,'+');  
  32   3                                                   
  33   3          }
  34   2          LCD_ShowNum(1,9,T,3);   //LCD显示18B20返回的温度值T
  35   2          LCD_ShowChar(1,12,'.');   
  36   2          LCD_ShowNum(1,13,(unsigned long)(T*10000)%10000,4);//在LCD显示T，小数精度四位   
  37   2            LCD_ShowString(2,1,"Set:");
  38   2          if(s<0)       //设定温度个位显示为s
  39   2          {
  40   3            LCD_ShowChar(2,8,'-');  //若s小于0显示负号
  41   3            T=-T;     //T随之取反
  42   3          }
  43   2          else        
  44   2          {
  45   3            LCD_ShowChar(2,8,'+');  //与上面相反
  46   3          }
  47   2            LCD_ShowNum(2,9,s,3);
  48   2            LCD_ShowChar(2,12,'.');
  49   2            LCD_ShowNum(2,13,s1,1);//设定温度小数部分s1
  50   2          LCD_ShowNum(2,14,0,3);//单精度调节，小数后三位显示0，与实际温度NOW T对齐
  51   2            if(P3_6==0)
  52   2        {
  53   3          Delay(20);//消抖
  54   3          while(P3_6==0);//按键判定
C51 COMPILER V9.54   MAIN                                                                  01/14/2026 22:32:46 PAGE 2   

  55   3          Delay(20);
  56   3          s1++;//若按下P3_6口对应按键，则s1示数+1
  57   3        }
  58   2          if(P3_5==0)
  59   2        {
  60   3          Delay(20);
  61   3          while(P3_5==0);//同前
  62   3          Delay(20);
  63   3          s1--;
  64   3        }
  65   2          if(s1<0)
  66   2        {
  67   3          s1=9;
  68   3          s--;//小于零消一
  69   3        }
  70   2        if(s1>9)
  71   2        {
  72   3          s1=0;
  73   3          s++;//十进一操作
  74   3        }
  75   2        if(T>(s+0.1*s1)+0.5)//设定温度大于T0.5度时执行操作
  76   2        {
  77   3          P3_0=0;//P3口绿灯亮起表示TEC工作
  78   3          P2_0=0;//P2口接继电器，TEC开始工作
  79   3          TL0 = 0x18;   //取低位
  80   3          TH0 = 0xFC;   //取高位
  81   3          T0Count++;  //用定时器计数
  82   3        if(T0Count>=100)
  83   3        {
  84   4          T0Count=0;
  85   4        }
  86   3        Nixie(1,T0Count/10);//数码管第一位显示数字每秒+1
  87   3        Delay(28);
  88   3        
  89   3        }
  90   2        else
  91   2        {
  92   3          P3_0=1;
  93   3          P2_0=1;
  94   3          T0Count=0;
  95   3        }
  96   2          if(T<(s+0.1*s1)-0.5)//同上
  97   2        {
  98   3          P3_1=0;
  99   3          
 100   3        }
 101   2        else
 102   2        {
 103   3          P3_1=1;
 104   3        }
 105   2      }
 106   1        }
 107          void Int1_ISR() interrupt 1 //外部中断,按键控制单片机运行与暂停查询;
 108            {
 109   1         
 110   1          while(!P3_3);//高低电平取反，即当按下P3_3时为高电平相当于while(1)死循环,松开时低电平，相当于while(0)进入
             -下一段代码;
 111   1      
 112   1      }


MODULE INFORMATION:   STATIC OVERLAYABLE
C51 COMPILER V9.54   MAIN                                                                  01/14/2026 22:32:46 PAGE 3   

   CODE SIZE        =    614    ----
   CONSTANT SIZE    =     12    ----
   XDATA SIZE       =   ----    ----
   PDATA SIZE       =   ----    ----
   DATA SIZE        =     22    ----
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
